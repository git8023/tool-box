!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue-class-component")):"function"==typeof define&&define.amd?define(["exports","vue-class-component"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ToolBox={},t.vueClassComponent)}(this,(function(exports,vueClassComponent){"use strict";class Cast{static get nil(){}static get anyA(){return[]}static get anyO(){return this.as()}static as(t={}){return t}static error(t){return t instanceof Error?t:"string"==typeof t?Error(t):Error("undefined")}}class Dates{static datePoF(t,e,r){const s=this.dateParse(t,e);return s&&validators.is(r,"String")&&r.trim().length?this.dateFmt(s,r):s}static dateParse(dateStr,pattern){const metaPatterns={metas:{y:{name:"Year",setYear:function(t){t.setFullYear(this.original||0)}},M:{name:"Month",setMonth:function(t){t.setMonth(isNaN(this.original)?0:this.original-1)}},d:{name:"Day",setDay:function(t){t.setDate(this.original||0)}},H:{name:"Hour",setHour:function(t){t.setHours(this.original||0)}},m:{name:"Minute",setMinute:function(t){t.setMinutes(this.original||0)}},s:{name:"Second",setSecond:function(t){t.setSeconds(this.original||0)}},S:{name:"Millisecond",setMillisecond:function(t){t.setMilliseconds(this.original||0)}}},setValues:function(t){return this.metas.y.setYear(t),this.metas.M.setMonth(t),this.metas.d.setDay(t),this.metas.H.setHour(t),this.metas.m.setMinute(t),this.metas.s.setSecond(t),this.metas.S.setMillisecond(t),t},validate:function(originDateStr,tgtPattern){const NUMBER_PATTERN="\\d",MX_PATTERN="\\d+";let replacedPattern=(tgtPattern||"")+"";if(!replacedPattern)return!1;const metasStr=[];Jsons.foreach(this.metas,(t=>{metasStr.push(t.index)})),replacedPattern=replacedPattern.replace(/\//g,"\\/"),Arrays.foreach(metasStr,(el=>{replacedPattern=replacedPattern.replace(eval(`(/${el.item}/g)`),"S"===el.item?MX_PATTERN:NUMBER_PATTERN)})),replacedPattern=replacedPattern.replace(/\\\\/g,"\\").replace(/\//g,"/");const result=eval("(/^"+replacedPattern+"$/)").test(originDateStr);if(result){const _this=this,metasGroup=metasStr.join(""),groupRegExp=eval("(/(["+metasGroup+"])\\1*/g)"),onlyNumberDateStr=originDateStr.replace(/\D+/g,"");let originValueIndex=0;Jsons.foreach(tgtPattern.match(groupRegExp),(function(t){const e=_this.metas[t.item[0]];e.beginIndex=tgtPattern.indexOf(t.item),e.pLength=t.item.length,"S"!==t.item[0]?e.original=onlyNumberDateStr.substring(originValueIndex,originValueIndex+e.pLength):e.original=onlyNumberDateStr.substring(originValueIndex),originValueIndex+=e.pLength}))}return result}},success=metaPatterns.validate(dateStr,pattern);return success?metaPatterns.setValues(new Date):null}static dateFmt(t,e){if(Validation.isNullOrUndefined(t))return"";if((Validation.is(t,"Number")||Validation.is(t,"String"))&&(t=new Date(t)),Validation.isNot(t,"Date"))throw new Error("Error Type: Parameters 'date' must be a Date type");return function(t){const e=this;t=t||"yyyy-MM-dd HH:mm:ss";const r=e.getTime();if(isNaN(r))return;const s={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(const e in s)new RegExp("("+e+")").test(t)&&(t=1===RegExp.$1.length?t.replace(RegExp.$1,s[e].toString()):t.replace(RegExp.$1,("00"+s[e]).substr(s[e].toString().length)));return t}.call(t,e)}static dateDiff(t,e=new Date){return Validation.isNot(t,"Date")&&Validation.isNot(e,"Date")?NaN:t.getTime()-e.getTime()}static nowFmt(t){return this.dateFmt(new Date,t)}}var LogLevel;exports.LogLevel=void 0,LogLevel=exports.LogLevel||(exports.LogLevel={}),LogLevel[LogLevel.TRACE=0]="TRACE",LogLevel[LogLevel.DEBUG=1]="DEBUG",LogLevel[LogLevel.INFO=2]="INFO",LogLevel[LogLevel.WARN=3]="WARN",LogLevel[LogLevel.ERROR=4]="ERROR",LogLevel[LogLevel.FATAL=5]="FATAL",LogLevel[LogLevel.OFF=6]="OFF";const MAX_NAME_LENGTH=Object.keys(exports.LogLevel).filter((t=>isNaN(Number(t)))).sort(((t,e)=>t.length-e.length)).pop().length,ConsoleFontColor={TRACE:"#999",DEBUG:"#333",INFO:"#40c740",WARN:"#8f8f00",ERROR:"#ac001c",FATAL:"#ff0000",OFF:"transparent"};class ConsoleLogger{static _instance;static get instance(){return ConsoleLogger._instance||(ConsoleLogger._instance=new ConsoleLogger),ConsoleLogger._instance}level=exports.LogLevel.TRACE;cacheSize=200;enableTrace=!1;cacheStore=[];trace=(...t)=>this.log(exports.LogLevel.TRACE,Array.from(t),!0);debug=(...t)=>this.log(exports.LogLevel.DEBUG,Array.from(t));info=(...t)=>this.log(exports.LogLevel.INFO,Array.from(t));warn=(...t)=>this.log(exports.LogLevel.WARN,Array.from(t));error=(...t)=>this.log(exports.LogLevel.ERROR,Array.from(t));fatal=(...t)=>this.log(exports.LogLevel.FATAL,Array.from(t));constructor(){exports.LogLevel.DEBUG===this.level&&(window.logs=this,this.dir={LogLevel:exports.LogLevel,ConsoleFontColor:ConsoleFontColor,filter:t=>{this.cacheStore.filter((e=>e.lv===t)).map((t=>t.args)).forEach(this.print.bind(this))}})}log(t,e,r=!1){if(t<this.level)return;this.enableTrace=r;const s=exports.LogLevel[t],n=ConsoleFontColor[s];let i=0;Arrays.foreach(e,(t=>{const e=Validation.is(t.item,"String");return e&&i++,e}));const o=[`%c[${s.padStart(MAX_NAME_LENGTH)}]%c -- [${Dates.nowFmt("yyyy-MM-dd HH:mm:ss:S")}]:`+" %s".repeat(i),`padding:5px; background:${n}; color:#fff; font-size:12px;`,`color:${n}; border:0;background:transparent; font-size:14px;`,...e];this.cache(t,o),this.print(o)}print(t){const e=(((new Error).stack.split("\n")[4]||"").match(/\((.*)\)/)||[])[1]||"";console.log(...t,e);this.level<=exports.LogLevel.DEBUG&&this.enableTrace&&(console.groupCollapsed("Debug Trance"),console.trace(),console.groupEnd())}cache(t,e){for(this.cacheStore.push({lv:t,args:e});this.cacheStore.length>this.cacheSize;)this.cacheStore.pop()}}const Logs=ConsoleLogger.instance;class Promises{static from(t){return Promise.resolve(t)}static of(t){return Validation.isFunction(t)?new Promise(((e,r)=>{try{e(Functions.call(t))}catch(t){r(t)}})):this.from(t)}static control(t){const e=Cast.as(),r=Promise.race([t||Promise.resolve(void 0),new Promise(((t,r)=>{e.abort=r})).catch((()=>Logs.debug("异步数据被取消!")))]);return r.abort=()=>e.abort(),r}}class Functions{static call(t,...e){return t&&Validation.isFunction(t)?Cast.as(t).call(void 0,...e):void 0}static execOrGetter(t){return t instanceof Function?Functions.call(t):t}static execOrAsyncGetter(t){if(t instanceof Promise)return t;const e=this.execOrGetter(t);return Promises.from(e)}static timer(t,e=!1,r=0,s=!1,...n){s&&(Functions.call(t,...n),!e)||setTimeout((()=>{Promises.of((()=>t(...n))).then((()=>{e&&this.timer(t,e,r)}))}),r)}}class Objects{static equals(t,e,r){if(r){return Jsons.get(t,`${String(r)}`)===Jsons.get(e,`${String(r)}`)}return t===e}}class Switcher{condition;valueInner;constructor(t,e){this.condition=t,this.setValue(t,e)}case(t,e){return this.condition||this.setValue(t,e),this}otherwise(t){return this.setValue(!this.condition,t)}throw(t,e){if(this.condition)return this;if(t)throw Cast.error(e);return this}otherwiseThrow(t){return this.throw(!0,t)}broken(t,e,r){if(!this.condition)throw Cast.error(r);return this.setValue(t,e)}getValue(t){return Validation.isNot(t,"Function")?this.valueInner:t(this.valueInner)}setValue(t,e){return this.condition=t??this.condition,this.condition&&(this.valueInner=Functions.execOrGetter(e)),this}}class Condition{c;negativeDesc;positiveDesc;constructor(t=!0){this.c=t}and(t,e,r,s=!0,n="CHAIN"){return this.exec(this.c&&t,e,r,s,n,t)}or(t,e,r,s=!0,n="CHAIN"){return this.exec(this.c||t,e,r,s,n,t)}not(t,e,r=!0,s="CHAIN"){return this.exec(!this.c,t,e,r,s)}result(t){return Functions.call(t,this.c,this.positiveDesc,this.negativeDesc)}exec(t,e,r,s,n,i){switch(t?this.positiveDesc=e:this.negativeDesc=r,this.c=s?t:this.c,n){case"PARAMETER":return i??this.c;case"CONDITION":return this.c;default:return this}}}class Logics{static case(t,e){return new Switcher(t,e)}static condition(t=!0){return new Condition(t)}}class Builders{static getterSelf(t){return e=>t??e}static getter(t){return e=>Jsons.get(e,t.toString())}static iteratorGetter(t){return e=>Validation.notEmpty(t)?Jsons.get(e.item,t.toString()):e.item}static equalsOther(t,e){return r=>Objects.equals(r,t,e)}static equalsOtherElement(t,e){return r=>{if(r.item===t)return!0;if("string"==typeof e)return Objects.equals(r.item,t,e);if(Validation.isFunction(e)){return!!Functions.call(e,r,t)}return!1}}static iteratorMapper(t){return Validation.isOr(t,"String","Number")?Builders.iteratorGetter(t):t}static toArrayKeyMapperHandler(t,e="throw"){return Logics.case(t instanceof Function,(()=>t)).case(Validation.is(t,"String"),(()=>Builders.iteratorGetter(t))).case("element"===e,(()=>Builders.iteratorGetter())).otherwiseThrow(Error("predictor无效. 仅支持String|Function")).getValue()}static runner(t,...e){return Cast.as((()=>t(...e)))}}class Arrays{static toMap(t,e,r=!0,s){const n=Cast.anyO;if(Validation.nullOrUndefined(t,e))return n;const i=Builders.iteratorMapper(e);return t.forEach(((t,e)=>{const o=i({item:t,index:e});if(n[o]&&!r)throw new Error(`不允许重复Key [${String(o)}]`);n[o]=t;const a=Functions.call(s,t)||[];if(Validation.notEmpty(a)){const t=Arrays.toMap(a,o,r,s);Jsons.merge(t,n,r)}})),n}static intersectionSimple(t){if(!t||!t.length||Validation.isEmpty(t))return[];const e=t[0];if(1===t.length)return e;t.sort(((t,e)=>t.length-e.length));return(t.pop()||[]).filter((e=>{let r=!0;return t.forEach((t=>{r&&(r=r&&t.includes(e))})),r}))}static intersection(t,e,r){if(t===e)return t;const s=Builders.toArrayKeyMapperHandler(r,"element");return Validation.isNot(t,"Array")||Validation.isEmpty(t)||Validation.isNot(e,"Array")||Validation.isEmpty(e)?[]:Logics.case(t.length>=e.length,{src:t,other:e}).otherwise({src:e,other:t}).getValue((({src:t,other:e})=>{const r=[];return this.foreach(t,(t=>{const n=s(t);this.foreach(e,(e=>{const i=s(e);n===i&&r.push(t.item)}))})),r}))}static seek(t,e,r){let s=Cast.nil;return Arrays.foreach(t,(t=>{if(e(t))return s=t,!1;const n=Functions.call(r,t);return!Validation.is(n,"Array")||(s=Arrays.seek(n,e,r),!Validation.notEmpty(s))})),s}static foreach(t,e){if(Validation.isNot(t,"Array"))return t;for(let r=0,s=t.length;r<s&&!1!==e({item:t[r],index:r});r++);return t}static pushUnique(t,e,r){const s=Arrays.index(t,e,r);return-1!==s.index?s.index:t.push(e)-1}static index(t,e,r){let s=-1;const n=Builders.equalsOtherElement(e,r);Arrays.foreach(t,(t=>{if(n(t))return s=t.index,!1}));const i=Logics.case(-1!==s,t[s]).getValue();return{index:s,item:i}}static find(t,e,r){return Arrays.index(t,e,r)}static concat(t,e){if(Validation.isNot(t,"Array")||Validation.isNot(e,"Array"))throw new Error("无效数组参数");return Array.prototype.push.apply(t,e),t}static remove(t,e,r){const s=Arrays.index(t,e,r);return Logics.case(this.validateIndex(s),(()=>t.splice(s.index,1)[0])).getValue()}static removeAll(t,e){return t.filter((t=>!e.includes(t)))}static contains(t,e,r){return this.validateIndex(Arrays.index(t,e,r))}static filter(t,e){let r=[];Arrays.foreach(t,(t=>{!1===Functions.call(e,t)&&r.push(t.index)})),r=r.reverse(),Arrays.foreach(r,(e=>{t.splice(e.index,1)}))}static group(t,e){const r=Cast.as(),s=Builders.toArrayKeyMapperHandler(e);return Arrays.foreach(t,(t=>{const e=s(t);Jsons.computeIfAbsent(r,e,[]).push(t.item)})),r}static extractProps(t,e){const r=[];return Arrays.foreach(t,(t=>{const s=Jsons.get(t.item,e);Validation.notEmpty(s)&&r.push(s)})),r}static unique(t,e=!0,r){if(0===t.length)return t;const s=Builders.toArrayKeyMapperHandler(r,"element"),n=[],i=[];return this.foreach(t,(t=>{const e=s(t);i.includes(e)||(i.push(e),n.push(t.item))})),e&&(t.length=0,Arrays.concat(t,n)),t}static genNums(t,e){if(0>=e-t)return[];return[...new Array(e+1).keys()].slice(t)}static tree(t,e,r,s,n=!1){const i=Arrays.toMap(t,s),o=[];return Arrays.foreach(t,(t=>{const n=Jsons.get(t.item,r.toString()),a=i[n];if(!a)return;o.push(Jsons.get(t.item,s.toString()));const c=Jsons.computeIfAbsent(a,e,[]);c.push(t.item),a[e]=Arrays.unique(c)})),n&&Arrays.foreach(o,(t=>{delete i[t.item]})),Object.values(i)}static flatTreeSR(t,e,r=!0,s=!1){const n=r?[t]:[];return Validation.isNot(t,"Object")||(Arrays.foreach(t[e],(t=>{n.push(t.item);const r=Arrays.flatTreeSR(t.item,e,!1,s);Validation.notEmpty(r)&&n.push(...r)})),s&&delete t[e]),n}static flatTreeMR(t,e,r=!0,s=!1,n){const i=[];return this.foreach(t,(t=>{const n=this.flatTreeSR(t.item,e,r,s);this.concat(i,n)})),n?this.unique(i,!1,n):i}static validateIndex(t){return 0<=t.index}}class PropChains{static getArrOgnlVal(t,e){const r=e.indexOf("[");let s;if(0<r){s=t[e.substring(0,r)]}else s=t;const n=e.substring(r);if(!/^(\[\d+])+$/.test(n))throw new Error("非法下标索引:"+n);const i=n.split("][");if(1===i.length){return s[+n.replace("[","").replace("]","")]}let o=s;return Arrays.foreach(i,(t=>{if(Validation.isNot(o,"Array"))return!1;o=o[parseInt((t+"").replace("[","").replace("]",""))]})),o}static getValue(t,e){if(Validation.nullOrUndefined(t))return null;if(1===(e=e.trim()).split(".").length){return/\[/.test(e)?PropChains.getArrOgnlVal(t,e):t?t[e]:t}const r=e.indexOf("."),s=e.substring(0,r),n=/\[\d+]/.test(s)?PropChains.getArrOgnlVal(t,s):t[s],i=e.substring(r+1);return PropChains.getValue(n,i)}}class Jsons{static merge(t,e,r=!0){const s=this.extractRepeatKeys(t,e);return s.length&&!r?s:(Object.assign(e,t),[])}static extractRepeatKeys(...t){const e=new Array,r=t||[];return void 0===r?[]:(r.forEach((t=>{Validation.notNullOrUndefined(t)&&e.push(Object.keys(t))})),Arrays.intersectionSimple(e))}static simpleClone(t){return Validation.isNullOrUndefined(t)?null:JSON.parse(JSON.stringify(t))}static foreach(t,e){Validation.nullOrUndefined(t)||Arrays.foreach(Object.keys(t),(r=>e({item:t[r.item],index:r.item})))}static cover(t={},e=Cast.as({})){return this.foreach(e,(r=>{e[r.index]=t[r.index]??r.item})),e}static computeIfAbsent(t,e,r){if(Validation.is(t,"Array")){const s=Cast.as(t),n=Cast.as(e);let i=s[n];return Validation.isNullOrUndefined(i)&&(i=r instanceof Function?r(t,e):r,s.splice(n,0,i)),i}if(e in t)return t[e];const s=r instanceof Function?r(t,e):r;return t[e]=s,s}static compact(t,e=!1,r=!1,s=!1,n=!1,i=!1){if(!t)return t;const o=(t,e)=>{Validation.is(t,"Object")?delete t[e]:Validation.is(t,"Array")&&t.splice(+e,1)};return this.foreach(t,(a=>{if(Validation.isEmpty(a.item)){if(Validation.isNullOrUndefined(a.item)&&!r)return void o(t,a.index);if(Validation.is(a.item,"String")&&!s)return void o(t,a.index);if(Validation.is(a.item,"Object")&&!n)return void o(t,a.index);if(Validation.is(a.item,"Array")&&!i)return void o(t,a.index)}if(a.item instanceof Object&&e){if(a.item=this.compact(a.item),Validation.notEmpty(a.item))return void(t[a.index]=a.item);if(Validation.is(a.item,"Object")&&!n)return void o(t,a.index);if(Validation.is(a.item,"Array")&&!i)return void o(t,a.index)}})),t}static get(t,e){return PropChains.getValue(t,String(e))}static flat(t,e){const r=[];return this.foreach(t,(t=>{const s=e(Cast.as(t));r.push(s)})),r}}class BError extends Error{constructor(t){super(BError.isError(t)?t.message:t),this.name="BError"}static from(t){return this.isError(t)?t:new BError(t)}static isError(t){return Validation.is(t,"Error")}static iff=(t,e)=>{t||this.throwError(e)};static throwError=t=>{throw this.from(t)}}class AsyncArrayStream{cursor=0;events={};array$;elements;result;isOver=!1;brokenInfo;brokenType;delegateResult;waitPromise;constructor(t){this.init(t)}static from(t){return new AsyncArrayStream(t)}onBegin(t){return this.events.begin=t,this}onElement(t){return this.events.element=t,this}onEmpty(t){return this.events.empty=t,this}onDone(t){return this.events.done=t,this}next(){return Functions.execOrAsyncGetter((()=>{if(this.isOver)return Promise.reject("数据已经处理完成");if(0===this.cursor&&(this.isOver=!1===Functions.call(this.events.begin,this),this.isOver))return;const t=this.elements||[];if(0===t.length){const t=Functions.call(this.events.empty,this);return Validation.isNullOrUndefined(t)?void(this.isOver=!0):this.init(Cast.as(t))}if(this.cursor===t.length)return;const e=t[this.cursor],r={index:this.cursor++,item:e,self:this,broken:this.broken.bind(this)},s=Functions.call(this.events.element,r);return Functions.execOrAsyncGetter(s).then((t=>t?this.next():(Logs.debug(`元素迭代返回结果:[${t}], 是否终止后续处理:[${!t}]`,r),void this.broken({...r,self:void 0},"ELEMENT_ITERATOR_HANDLE:FALSE"))))}))}broken(t,e="MANUAL"){this.isOver=!0,this.brokenInfo=t,this.brokenType=e}getResult(){return new Promise((t=>this.delegateResult=t))}init(t){return this.cursor=0,this.isOver=!1,this.result=void 0,this.array$=Functions.execOrAsyncGetter(t),this.await()}await(){return this.waitPromise&&this.waitPromise.abort(),this.waitPromise=Promises.control(this.array$.then((t=>(this.elements=t,this.next()))).then((()=>{this.result=Functions.call(this.events.done,this),this.events.done=void 0,this.callDelegateResult()})).catch((t=>{this.catch(t)}))),this.waitPromise}catch(t){const e={self:this,error:BError.from(t)};this.result=Functions.call(this.events.error,e),this.broken(t),this.callDelegateResult()}callDelegateResult(){const t={result:this.result,broken:this.brokenInfo,brokenType:this.brokenType};Functions.call(this.delegateResult,t),this.delegateResult=void 0}}class Validation{static nullOrUndefined(...t){for(const e in t)if(!this.isNullOrUndefined(t[e]))return!1;return!0}static isNullOrUndefined(t){return null==t}static notNullOrUndefined(t){return!this.isNullOrUndefined(t)}static isTruthy(t){return!this.isFalsy(t)}static isFalsy(t){return!t}static is(t,e){return`[object ${e}]`===Object.prototype.toString.call(t)}static isOr(t,e,...r){(r=r||[]).push(e);for(const e of r)if(this.is(t,e))return!0;return!1}static isNot(t,e){return!this.is(t,e)}static isEmpty(t){return!!this.isNullOrUndefined(t)||(this.isOr(t,"Array","String")?0===t.length:!!this.is(t,"Object")&&0===Object.keys(t).length)}static notEmpty(t){return!this.isEmpty(t)}static isEq(t,e){return t===e||(!(!this.isNullOrUndefined(t)||!this.isNullOrUndefined(e))||JSON.stringify(t)===JSON.stringify(e))}static isFunction(t){return this.is(t,"Function")}static validate(t,e,r=!1){const s=Jsons.flat(e,(e=>({index:e.index,validate:e.item,iter:{item:Jsons.get(t,e.index),index:e.index}})));return r?AsyncArrayStream.from(s).onElement((t=>t.item.validate(Cast.as(t.item.iter)))).getResult().then((t=>Validation.isEmpty(t.broken)||Validation.isEmpty(t.brokenType))):s.reduce(((t,e)=>t&&!1!==e.validate(e.iter)),!0)}}class DataPoolKey{static AXIOS_SERVICE=Symbol("AXIOS_SERVICE")}class DataPool{static POOL=new Map;static get(t){return this.POOL.get(t)}static set(t,e){this.POOL.set(t,e)}}class Request{static get axios(){return DataPool.get("AXIOS_SERVICE")}}function Get(t){return(e,r)=>{e[r]=e=>{const r=setPathVariable(t,e=e||{});return Request.axios.get(r,{params:e.params}).then(extractResponseData)}}}function Delete(t){return generateWithPost(t,"delete")}function Post(t){return generateWithPost(t,"post")}function Put(t){return generateWithPost(t,"put")}const setPathVariable=(t,e)=>{const r=e.pathVariables||{};return t.replaceAll(/({[^/]+})/g,(t=>{const e=t.match(/{(.+)}/)[1],s=r[e];if(Validation.isNot(s,"String")&&Validation.isNot(s,"Number"))throw new Error(`缺少路径变量[${e}]配置`);return s.toString()}))},extractResponseData=t=>t.data.data,generateWithPost=(t,e)=>(r,s)=>{r[s]=r=>{const s=setPathVariable(t,r=r||{});return Request.axios[e](s,r.params).then(extractResponseData)}};class Strings{static replaceAll(t="",e={}){let r=t;return Jsons.foreach(e,(t=>{const e=new RegExp(`${t.index}`,"g");r=r.replace(e,t.item)})),r}static hasBlank(t=!0,...e){let r=!1;return Arrays.foreach(e,(e=>{if(this.isBlank(e.item,t))return r=!0,!1})),r}static isBlank(t,e=!0){return!Validation.isNot(t,"String")&&(!!Validation.isNullOrUndefined(t)||(e&&(t=t.trim()),0===t.length))}static guid(){const t=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static toString(t){return`${t}`}static trimToEmpty(t){return Validation.isNullOrUndefined(t)?"":t.toString().trim()}static html2text(t){let e=document.createElement("i");null!=e.textContent?e.textContent=t:e.innerText=t;const r=e.innerHTML;return e=null,r}static text2html(t){let e=document.createElement("i");e.innerHTML=t;const r=e.innerText||e.textContent;return e=null,r}}class Events{static debouncer(t=100,e){return Logs.info("[Events.debouncer] Execute debouncer"),vueClassComponent.createDecorator(((r,s)=>{const n=r.methods[s];e=e||`__${s}__${Strings.guid()}`,Logs.info("[Events.debouncer] Redefine function: ",s),r.methods[s]=function(...r){!0!==this[e]?(this[e]=!0,Logs.info("[Events.debouncer] Executing function: ",s),n.apply(this,r),setTimeout((()=>this[e]=!1),t)):Logs.info(`[Events.debouncer] 函数[${s}]需要等待上次防抖结束`)}}))}static debounceController(t,e=300){return vueClassComponent.createDecorator(((r,s)=>{const n=r.methods[s];if(!(n instanceof Function))throw new Error(`[Events.debounceController] 目标属性不是可执行函数: ${s}`);const i=r.methods[t];if(!(i instanceof Function))throw new Error(`[Events.debounceController] 中断函数无效, 指定属性不是可执行函数: ${String(t)}`);let o;r.methods[s]=function(...t){Logs.info(`[Events.debounceController] 函数[${s}]延迟执行 ${e} ms`),o=setTimeout((()=>n.bind(this)(...t)),e)},r.methods[t]=function(...e){Logs.info(`[Events.debounceController] 函数[${s}]执行被[${String(t)}]中断, 执行函数[${String(t)}]`),clearTimeout(o),i.bind(this)(...e)}}))}static log(t=!0,e=!0){return vueClassComponent.createDecorator(((r,s)=>{const n=r.methods[s];r.methods[s]=(...i)=>{const o=String(r.__file).split("/").pop(),a=`[${String(o).split(".")[0]}.${s}]`;t&&Logs.debug(a," Parameters: ",i);const c=n(...i);return e&&Validation.notNullOrUndefined(c)&&Logs.debug(a," Returns: ",c),c}}))}static lazy(t,e=10,r){return e=0<e?e:10,r=0<=(r=r??e)?r:e,vueClassComponent.createDecorator(((s,n)=>{const i=s.methods[n];s.methods[n]=function(...s){const n=this,o=()=>{const e=!!Functions.call(t,n);return e&&i.bind(n)(...s),e};setTimeout((()=>{o();const t=setInterval((()=>o()&&clearInterval(t)),r)}),e)}}))}static observe(t,e=!0,r=!1){return vueClassComponent.createDecorator(((s,n)=>{const i=s.methods[n];s.methods[n]=function(...s){const n=(t=t.bind(this))({stage:"before",args:s});if(!e||!1!==n)try{const e=i.bind(this)(...s);if(Validation.is(e,"Promise"))return e.then((e=>{const s=t({stage:"after",data:e});return r?s:e})).catch((e=>(t({stage:"error",error:e}),Promise.reject(e))));const n=t({stage:"after",data:e});return r?n:e}catch(e){return t({stage:"after",error:e})}}}))}static observeRun(t){return this.observe((function({stage:e}){const r=this;switch(e){case"before":return Functions.call(Jsons.get(r,t.before));case"after":return void Functions.call(Jsons.get(r,t.after));case"error":Functions.call(Jsons.get(r,t.catcher)),Functions.call(Jsons.get(r,t.final));break;default:return void Logs.warn(`[Events] 未处理状态: ${e}`)}}),!1,!1)}static blink(t,e=10){return vueClassComponent.createDecorator(((r,s)=>{const n=r.methods[s];r.methods[s]=function(...r){this[t]=!1,Promises.of((()=>n.bind(this)(...r))).then((()=>Functions.timer((()=>this[t]=!0),!1,e)))}}))}}class Decorators{static class=t=>e=>t({target:e});static method=t=>(e,r)=>t({target:e,fnKey:r})}class Observer{static log(t=!0,e=!0){return(r,s)=>{const n=`[${s}] `,i=r[s];r[s]=(...r)=>{t&&Logs.debug(n," Parameters: ",r);const s=i(...r);return e&&Logs.debug(n," Returns: ",s),s}}}static lazy=(t,e=10,r)=>(e=0<e?e:10,r=0<=(r=r??e)?r:e,Decorators.method((({target:s,fnKey:n})=>{const i=s[n];s[n]=function(...s){const n=this,o=()=>{const e=t.bind(n)(n,...s);return e&&i.bind(n)(...s),e};setTimeout((()=>{o();const t=setInterval((()=>o()&&clearInterval(t)),r)}),e)}})));static x=(t,e)=>{t.___c___="xxx";const r=t[e];t[e]=function(...e){r.bind(t)(1,2,3)}}}class Storages{static $(t){const e={save(r,s){const n=e.get(r);return t.setItem(r,JSON.stringify(s)),n},get(e){const r=t.getItem(e);return Validation.isNullOrUndefined(r)?null:JSON.parse(r)},remove(r){const s=e.get(r);return t.removeItem(r),s},clear(){t.clear()}};return e}static $session=Storages.$(sessionStorage);static $local=Storages.$(localStorage)}class StoreTools{static commit(t,e,r){t.commit(String(e),r)}static generateMutations(t){const e={};return Object.keys(t).forEach((t=>{e[t]=(e,r)=>e[t]=r})),e}static generateActions(t){const e={};return Object.keys(t).forEach((t=>{e[t]=(e,r)=>this.commit(e,t,r)})),e}static generateGetters(t){const e={};return Object.keys(t).forEach((t=>{e[t]=e=>e[t]})),e}}class Broadcast{subscribers=new Map;emit(t,e){const r=this.get(t);return Arrays.foreach(r,(t=>{Functions.call(t.item,e)})),this}on(t,e,r=!1,s=0,...n){return this.get(t).push(e),r&&Functions.timer(e,!1,s,!1,...n),this}off(t,e){const r=this.get(t);return Arrays.remove(r,e),this}get(t){let e=this.subscribers.get(t);return e||this.subscribers.set(t,e=[]),e}}class Documents{static copyText(t){return navigator.clipboard.writeText(t).then((()=>(Logs.debug("[CodeHL] navigator.clipboard 复制成功!"),!0))).catch((()=>{const e=document.createElement("textarea");return e.value=t,e.select(),document.execCommand("copy"),Logs.debug("[CodeHL ] document.execCommand 复制成功"),!0}))}}exports.Arrays=Arrays,exports.AsyncArrayStream=AsyncArrayStream,exports.BError=BError,exports.Broadcast=Broadcast,exports.Builders=Builders,exports.Cast=Cast,exports.Condition=Condition,exports.ConsoleLogger=ConsoleLogger,exports.DataPool=DataPool,exports.DataPoolKey=DataPoolKey,exports.Dates=Dates,exports.Delete=Delete,exports.Documents=Documents,exports.Events=Events,exports.Functions=Functions,exports.Get=Get,exports.Jsons=Jsons,exports.Logics=Logics,exports.Logs=Logs,exports.Objects=Objects,exports.Observer=Observer,exports.Post=Post,exports.Promises=Promises,exports.PropChains=PropChains,exports.Put=Put,exports.Storages=Storages,exports.StoreTools=StoreTools,exports.Strings=Strings,exports.Switcher=Switcher,exports.Validation=Validation}));
